<!DOCTYPE html>
<html lang="en">

<style>
	html, body, canvas { margin: 0px; padding: 0px; }
</style>

<canvas id="screen" style="width: 100%; height: 100%"/>

<script>
	// initialize our canvas
	const canvas = document.getElementById('screen');
	const context = canvas.getContext('2d');
	
	// FPS counter
	const FPS = 60;
	const cycleDelay = Math.floor(1000 / FPS);
	var oldCycleTime = 0;
	var cycleCount = 0;
	var fps_rate = '...';
	
	// screen constants
	const WIDTH = 300, HALF_WIDTH = 150;
	const HEIGHT = 200, HALF_HEIGHT = 100;
	
	// definition of the game loop
	function gameLoop(){
	
		// calculate the FPS
		cycleCount++;
		if(cycleCount >= 60) cycleCount = 0;
		
		var startTime = Date.now();
		var cycleTime = startTime - oldCycleTime;
		
		oldCycleTime = startTime;
		
		if(cycleCount % 60 == 0) fps_rate = Math.floor(1000 / cycleTime);
	
		// resize canvas dynamically
		canvas.width = window.innerWidth * 0.4;
		canvas.height = window.innerHeight * 0.4;
		
		// updating the screen every loop
		context.fillStyle = 'Black';
		context.fillRect(0, 0, canvas.width, canvas.height);
		context.fillStyle = 'White';
		context.fillRect(canvas.width / 2 - HALF_WIDTH, canvas.height / 2 - HALF_HEIGHT, WIDTH, HEIGHT);
	
		// make the loop infinite
		setTimeout(gameLoop, 0);
		
		// render FPS to the screen
		context.fillStyle = 'White';
		context.font = '12px Ubuntu';
		context.fillText("FPS: " + fps_rate, 0, 20);
		
	} window.onload = function() { gameLoop(); }
</script>

